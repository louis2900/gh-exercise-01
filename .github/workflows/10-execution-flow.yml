name: 10 - Execution Flow
on: 
  workflow_dispatch:
    inputs:
      pass-unit-tests:
        description: "have the unit tests passed?"
        type: boolean
        default: true
jobs: 
 lint-build:
  runs-on: ubuntu-latest
  steps:
    - name: lint and build
      run: echo "Linting and building project"
 unit-tests:
  runs-on: ubuntu-latest
  steps:
    - name: run unit tests
      run: Running tests...
    - name: Failing tests
      if: ${{ inputs.pass-unit-tests == false }}
      run: exit 1
  continue-on-error: true
 deploy-nonprod:
    runs-on: ubuntu-latest
    needs: [lint-build, unit-tests]
    steps:
      - name: deploy to non-prod
        run: echo "Deploying to non-production environment
 e2e-tests:
    runs-on: ubuntu-latest
    needs: deploy-nonprod
    steps:
      - name: run e2e tests
        run: echo "Running end-to-end tests"
 load-tests:
    runs-on: ubuntu-latest
    needs: deploy-nonprod
    steps:
      - name: run load tests
        run: echo "Running load tests"
 deploy-prod:
    runs-on: ubuntu-latest
    needs: [e2e-tests, load-tests]
    steps:
      - name: deploy to prod
        run: echo "Deploying to production environment"

